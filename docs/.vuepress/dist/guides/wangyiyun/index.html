<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>React16.13.1网抑云实战 | 前端厚说</title>
    <meta name="generator" content="VuePress 1.7.1">
    
    <meta name="description" content="frontend-thick-talk">
    
    <link rel="preload" href="/assets/css/0.styles.022aabf0.css" as="style"><link rel="preload" href="/assets/js/app.c6dc177b.js" as="script"><link rel="preload" href="/assets/js/2.37f6b020.js" as="script"><link rel="preload" href="/assets/js/71.ecbcae9e.js" as="script"><link rel="prefetch" href="/assets/js/10.30b53e00.js"><link rel="prefetch" href="/assets/js/11.433b5424.js"><link rel="prefetch" href="/assets/js/12.03606528.js"><link rel="prefetch" href="/assets/js/13.cd6ef301.js"><link rel="prefetch" href="/assets/js/14.96ece6b0.js"><link rel="prefetch" href="/assets/js/15.4f41c438.js"><link rel="prefetch" href="/assets/js/16.cebfe0a7.js"><link rel="prefetch" href="/assets/js/17.1e277117.js"><link rel="prefetch" href="/assets/js/18.7e928cfc.js"><link rel="prefetch" href="/assets/js/19.252969d7.js"><link rel="prefetch" href="/assets/js/20.9473151a.js"><link rel="prefetch" href="/assets/js/21.095f877c.js"><link rel="prefetch" href="/assets/js/22.9657b463.js"><link rel="prefetch" href="/assets/js/23.a88fac9d.js"><link rel="prefetch" href="/assets/js/24.4d6c2352.js"><link rel="prefetch" href="/assets/js/25.a4114426.js"><link rel="prefetch" href="/assets/js/26.5efc5485.js"><link rel="prefetch" href="/assets/js/27.3ce02ce6.js"><link rel="prefetch" href="/assets/js/28.8bb823d6.js"><link rel="prefetch" href="/assets/js/29.62ff7623.js"><link rel="prefetch" href="/assets/js/3.a0e80c1a.js"><link rel="prefetch" href="/assets/js/30.1af259b0.js"><link rel="prefetch" href="/assets/js/31.5f544dde.js"><link rel="prefetch" href="/assets/js/32.892dac7c.js"><link rel="prefetch" href="/assets/js/33.4828154e.js"><link rel="prefetch" href="/assets/js/34.d97670dc.js"><link rel="prefetch" href="/assets/js/35.c27dcfc7.js"><link rel="prefetch" href="/assets/js/36.0573e0e9.js"><link rel="prefetch" href="/assets/js/37.d861dcc8.js"><link rel="prefetch" href="/assets/js/38.eb2addcc.js"><link rel="prefetch" href="/assets/js/39.b80b1acd.js"><link rel="prefetch" href="/assets/js/4.9b87f7a4.js"><link rel="prefetch" href="/assets/js/40.865c4d00.js"><link rel="prefetch" href="/assets/js/41.ac70ef3a.js"><link rel="prefetch" href="/assets/js/42.ea56a914.js"><link rel="prefetch" href="/assets/js/43.873cbed2.js"><link rel="prefetch" href="/assets/js/44.60b94e15.js"><link rel="prefetch" href="/assets/js/45.f242c89a.js"><link rel="prefetch" href="/assets/js/46.25aee4a7.js"><link rel="prefetch" href="/assets/js/47.9d2a1deb.js"><link rel="prefetch" href="/assets/js/48.4a8c5546.js"><link rel="prefetch" href="/assets/js/49.d42dc279.js"><link rel="prefetch" href="/assets/js/5.bc36f829.js"><link rel="prefetch" href="/assets/js/50.9df4a441.js"><link rel="prefetch" href="/assets/js/51.e83da807.js"><link rel="prefetch" href="/assets/js/52.7814afa8.js"><link rel="prefetch" href="/assets/js/53.aca0fda2.js"><link rel="prefetch" href="/assets/js/54.65aa9d95.js"><link rel="prefetch" href="/assets/js/55.1c3872d3.js"><link rel="prefetch" href="/assets/js/56.2d3be405.js"><link rel="prefetch" href="/assets/js/57.6f625883.js"><link rel="prefetch" href="/assets/js/58.a08b66c1.js"><link rel="prefetch" href="/assets/js/59.99ae582c.js"><link rel="prefetch" href="/assets/js/6.cd75d519.js"><link rel="prefetch" href="/assets/js/60.1655a3fa.js"><link rel="prefetch" href="/assets/js/61.92bb992a.js"><link rel="prefetch" href="/assets/js/62.87840f02.js"><link rel="prefetch" href="/assets/js/63.c27b8687.js"><link rel="prefetch" href="/assets/js/64.bef371fe.js"><link rel="prefetch" href="/assets/js/65.7ba61097.js"><link rel="prefetch" href="/assets/js/66.ea1d073a.js"><link rel="prefetch" href="/assets/js/67.5a1a355e.js"><link rel="prefetch" href="/assets/js/68.9fc052df.js"><link rel="prefetch" href="/assets/js/69.16c7b5cc.js"><link rel="prefetch" href="/assets/js/7.072094f9.js"><link rel="prefetch" href="/assets/js/70.2e88302b.js"><link rel="prefetch" href="/assets/js/72.f8d5e47b.js"><link rel="prefetch" href="/assets/js/73.baad7fa2.js"><link rel="prefetch" href="/assets/js/74.f6609908.js"><link rel="prefetch" href="/assets/js/75.acaf31b4.js"><link rel="prefetch" href="/assets/js/8.fb212fd0.js"><link rel="prefetch" href="/assets/js/9.70e28542.js">
    <link rel="stylesheet" href="/assets/css/0.styles.022aabf0.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">前端厚说</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/guides/" class="nav-link router-link-active">
  指南
</a></div><div class="nav-item"><a href="https://github.com/yayxs/frontend-thick-talk" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/guides/" class="nav-link router-link-active">
  指南
</a></div><div class="nav-item"><a href="https://github.com/yayxs/frontend-thick-talk" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>前言</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guides/" aria-current="page" class="sidebar-link">项目缘起</a></li><li><a href="/guides/quick_start.html" class="sidebar-link">大纲速览</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>简历面试</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guides/interview/" class="sidebar-link">我该怎么准备一份写简历的模板</a></li><li><a href="/guides/interview/question.html" class="sidebar-link">关于面试题侧重点在哪嘞</a></li><li><a href="/guides/interview/top_fe_iqa.html" class="sidebar-link">前端头部高频面试题及答案</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>HTML/HTML5</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>CSS/CSS3</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guides/css/css_basis.html" class="sidebar-link">CSS 的基础知识</a></li><li><a href="/guides/css/css3.html" class="sidebar-link">CSS3 有哪些好玩的新特性</a></li><li><a href="/guides/css/css_layout.html" class="sidebar-link">CSS 必须掌握的布局方式</a></li><li><a href="/guides/css/css_mixin.html" class="sidebar-link">企业级项目中的CSS Mixin</a></li><li><a href="/guides/css/css_preprocessor.html" class="sidebar-link">CSS中的预处理器Sass</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>读书笔记</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guides/books/css_secret_outline.html" class="sidebar-link">《CSS 揭秘》</a></li><li><a href="/guides/books/css-artistic-beauty/" class="sidebar-link">玩转CSS艺术之美</a></li><li><a href="/guides/books/js_advanced3_1.html" class="sidebar-link">《JavaScript高级程序设计（第3版）》</a></li><li><a href="/guides/books/js_advanced4_outline.html" class="sidebar-link">《JavaScript高级程序设计（第4版）》</a></li><li><a href="/guides/books/You-Dont-Know-JS/outline.html" class="sidebar-link">《你不知道的JavaScript（上卷）》</a></li><li><a href="/guides/books/webpack_outline.html" class="sidebar-link">《深入浅出 Webpack》</a></li><li><a href="/guides/books/flutter_1.html" class="sidebar-link">《Flutter 实战》</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>自制教程</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guides/bilibili/typescript.html" class="sidebar-link">2020年10月 TypeScript免费视频教程</a></li><li><a href="/guides/bilibili/vue3.html" class="sidebar-link">Vue3.x学习心得分享 | Vue免费视频教程</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JavaScript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>推荐分享</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guides/recommend/book.html" class="sidebar-link">看了这些书才是一名合格的前端</a></li><li><a href="/guides/recommend/video.html" class="sidebar-link">一路走来我看了哪些大佬的视频教程</a></li><li><a href="/guides/recommend/other.html" class="sidebar-link">除了敲代码我还应知道</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>TypeScript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Vue2/Vue3</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>React</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Flutter</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>实战项目</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guides/wangyiyun/" aria-current="page" class="active sidebar-link">React16.13.1网抑云实战</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guides/wangyiyun/#前言" class="sidebar-link">前言</a></li><li class="sidebar-sub-header"><a href="/guides/wangyiyun/#第一周成果展示" class="sidebar-link">第一周成果展示</a></li><li class="sidebar-sub-header"><a href="/guides/wangyiyun/#基本介绍" class="sidebar-link">基本介绍</a></li><li class="sidebar-sub-header"><a href="/guides/wangyiyun/#关于项目的样式" class="sidebar-link">关于项目的样式</a></li><li class="sidebar-sub-header"><a href="/guides/wangyiyun/#axios-网络请求封装" class="sidebar-link">axios 网络请求封装</a></li><li class="sidebar-sub-header"><a href="/guides/wangyiyun/#组件书写方式" class="sidebar-link">组件书写方式</a></li><li class="sidebar-sub-header"><a href="/guides/wangyiyun/#redux-流程" class="sidebar-link">redux 流程</a></li><li class="sidebar-sub-header"><a href="/guides/wangyiyun/#路由懒加载" class="sidebar-link">路由懒加载</a></li><li class="sidebar-sub-header"><a href="/guides/wangyiyun/#webpack-别名配置" class="sidebar-link">webpack 别名配置</a></li><li class="sidebar-sub-header"><a href="/guides/wangyiyun/#cra-的配置" class="sidebar-link">CRA 的配置</a></li><li class="sidebar-sub-header"><a href="/guides/wangyiyun/#其他" class="sidebar-link">其他</a></li><li class="sidebar-sub-header"><a href="/guides/wangyiyun/#关联阅读" class="sidebar-link">关联阅读</a></li><li class="sidebar-sub-header"><a href="/guides/wangyiyun/#q-a" class="sidebar-link">Q&amp;A</a></li><li class="sidebar-sub-header"><a href="/guides/wangyiyun/#前情提要" class="sidebar-link">前情提要</a></li><li class="sidebar-sub-header"><a href="/guides/wangyiyun/#第二周成果展示" class="sidebar-link">第二周成果展示</a></li><li class="sidebar-sub-header"><a href="/guides/wangyiyun/#路由配置" class="sidebar-link">路由配置</a></li><li class="sidebar-sub-header"><a href="/guides/wangyiyun/#项目部署上线" class="sidebar-link">项目部署上线</a></li><li class="sidebar-sub-header"><a href="/guides/wangyiyun/#关联阅读-2" class="sidebar-link">关联阅读</a></li><li class="sidebar-sub-header"><a href="/guides/wangyiyun/#最后" class="sidebar-link">最后</a></li><li class="sidebar-sub-header"><a href="/guides/wangyiyun/#彩蛋" class="sidebar-link">彩蛋</a></li></ul></li><li><a href="/guides/pro/flutter.html" class="sidebar-link">Flutter实际项目开发中踩坑合集</a></li><li><a href="/guides/pro/mini_pro.html" class="sidebar-link">小程序练手项目《孤岛》踩坑合集</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>微信小程序</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Web性能优化</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guides/optimization/all.html" class="sidebar-link">性能优化的基本知识</a></li><li><a href="/guides/optimization/css.html" class="sidebar-link">从CSS的角度出发</a></li><li><a href="/guides/optimization/vue.html" class="sidebar-link">从Vue的角度出发</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>前端工程化</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guides/webpack/webpack_basic.html" class="sidebar-link">Webpack的一些基本知识</a></li><li><a href="/guides/git/" class="sidebar-link">git 的一些常规操作命令以及小规范</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>数据结构与算法</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>LeetCode</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>博客文章</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><hr> <h1 id="react16-13-1-网抑云实战-第一周-axios-封装、轮播图实现、alias-别名"><a href="#react16-13-1-网抑云实战-第一周-axios-封装、轮播图实现、alias-别名" class="header-anchor">#</a> React16.13.1 网抑云实战 （第一周）| axios 封装、轮播图实现、alias 别名</h1> <blockquote><p>源码地址（实时更新）<a href="https://github.com/yayxs/NeteaseCloudMusic" target="_blank" rel="noopener noreferrer">https://github.com/yayxs/NeteaseCloudMusic<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>wiki 地址 <a href="https://github.com/yayxs/NeteaseCloudMusic/tree/master/docs" target="_blank" rel="noopener noreferrer">https://github.com/yayxs/NeteaseCloudMusic/tree/master/docs<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>axios 封装、轮播图实现、alias 别名</p></div> <h2 id="前言"><a href="#前言" class="header-anchor">#</a> 前言</h2> <h3 id="项目背景"><a href="#项目背景" class="header-anchor">#</a> 项目背景</h3> <p>基于两点：（一）是笔者在企业中是使用<code>react</code> 开发，不过有的处理问题的方案还是比较老旧。举个例子：关于<code>redux</code> 还是使用原始的<code>switch</code> 一通写，比如使用<code>thunk</code>要处理 网络请求的几种状态 包括 <strong>加载之前</strong> <strong>加载中</strong> <strong>记载异常</strong>等等，这些都要处理，会有很多相似的看起来很尴尬的代码，但是又不好改企业项目的方案。所以打算<strong>开发一个完整的企业级项目</strong> 整合当下更优解决问题的方案，（二）只注重于<code>前端</code>的实现，外加有个非常完美的<code>接口</code>（这里指的的是开源的<code>网易云</code>的 Api，相必大家都知道）。所以选择<code>网抑云</code>音乐。</p> <h3 id="关于项目"><a href="#关于项目" class="header-anchor">#</a> 关于项目</h3> <p>此项目是一个<code>JS 版本</code>的（目前是从 JS 版本开始） 个人练手项目，整合当下<code>React</code> 项目中的最极实践，每周更新进度 ，旨在更好的走<code>react</code> 企业级项目开发流程。</p> <p>分享<code>react</code>开发中的各个小点。望一起交流。代码会第一时间同步到文首的 仓库地址里(暂时没有放在码云)。</p> <p>每周争取写一篇<code>进度分享</code> 。感兴趣的小伙纸 点个 <code>star</code> 是我更新的动力。</p> <h2 id="第一周成果展示"><a href="#第一周成果展示" class="header-anchor">#</a> 第一周成果展示</h2> <h3 id="主要完成的部分"><a href="#主要完成的部分" class="header-anchor">#</a> 主要完成的部分</h3> <ul><li>弹出<code>webpack</code> 配置，添加 <code>src</code>别名</li> <li>配置<code>.vscode</code> 添加调试<code>json</code>配置</li> <li>整理<code>Redux</code> 相关实践流程，跑通 <code>Redux</code> 流程</li> <li><code>Api</code> 接口的<code>proxy</code>代理调试</li> <li><code>axios</code> 的封装，以及<code>api</code>的配置</li> <li><code>react-router-dom</code> 路由的初步化配置</li></ul> <h3 id="preview"><a href="#preview" class="header-anchor">#</a> Preview</h3> <p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6bf8800e9205405fa52490cd8e124c8a~tplv-k3u1fbpfcp-zoom-1.image" alt=""></p> <h2 id="基本介绍"><a href="#基本介绍" class="header-anchor">#</a> 基本介绍</h2> <p>首先要说的一点是<strong>项目是使用<a href="https://create-react-app.dev/" target="_blank" rel="noopener noreferrer">create react app <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></strong> 来创建的 。然后通过 <code>npm run eject</code>弹出 <code>webpack</code> 的配置 ，删除单个构建依赖项</p> <h3 id="目录结构"><a href="#目录结构" class="header-anchor">#</a> 目录结构</h3> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">|</span>-- LICENSE
<span class="token operator">|</span>-- README.md					// 描述文件
<span class="token operator">|</span>-- build
<span class="token operator">|</span>-- config
<span class="token operator">|</span>   <span class="token operator">|</span>-- webpack.config.js		// webpack 配置文件
<span class="token operator">|</span>-- docs 						// 配套文档博文
<span class="token operator">|</span>   <span class="token variable"><span class="token variable">`</span>-- images
<span class="token operator">|</span>-- examples
<span class="token operator">|</span>   <span class="token variable">`</span></span>-- proxy-middleware		// nestjs 项目  用于测试接口代理
<span class="token operator">|</span>-- jsconfig.json
<span class="token operator">|</span>-- package.json
<span class="token operator">|</span>-- public
<span class="token operator">|</span>   <span class="token operator">|</span>-- favicon.ico
<span class="token operator">|</span>   `-- index.html
<span class="token operator">|</span>-- scripts
<span class="token operator">|</span>-- src
<span class="token operator">|</span>   <span class="token operator">|</span>-- App.js					// App 主应用
<span class="token operator">|</span>   <span class="token operator">|</span>-- api						// api 接口
<span class="token operator">|</span>   <span class="token operator">|</span>-- assets					// 资源
<span class="token operator">|</span>   <span class="token operator">|</span>-- common					// 公用配置
<span class="token operator">|</span>   <span class="token operator">|</span>-- components				// 组件
<span class="token operator">|</span>   <span class="token operator">|</span>-- index.js
<span class="token operator">|</span>   <span class="token operator">|</span>-- layouts					// 布局
<span class="token operator">|</span>   <span class="token operator">|</span>-- pages					// 页面 views
<span class="token operator">|</span>   <span class="token operator">|</span>-- router					// react-router-dom 路由配置
<span class="token operator">|</span>   <span class="token operator">|</span>-- services				// axios 网络请求封装
<span class="token operator">|</span>   <span class="token operator">|</span>-- store					// redux 配置
<span class="token operator">|</span>   <span class="token operator">|</span>-- styles					// 样式文件
<span class="token operator">|</span>   <span class="token operator">|</span>-- utils					// 工具方法
<span class="token operator">|</span>-- yarn.lock

</code></pre></div><h3 id="依赖环境"><a href="#依赖环境" class="header-anchor">#</a> 依赖环境</h3> <h4 id="npm-脚本"><a href="#npm-脚本" class="header-anchor">#</a> npm 脚本</h4> <p>截止最新时间 <code>scripts</code> 的脚本</p> <div class="language-json extra-class"><pre class="language-json"><code> <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;analyze&quot;</span><span class="token operator">:</span> <span class="token string">&quot;source-map-explorer 'build/static/js/*.js'&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;start&quot;</span><span class="token operator">:</span> <span class="token string">&quot;node scripts/start.js&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;node scripts/build.js&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;test&quot;</span><span class="token operator">:</span> <span class="token string">&quot;node scripts/test.js&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;clear&quot;</span><span class="token operator">:</span> <span class="token string">&quot;rimraf node_modules &amp;&amp;  yarn add&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;check&quot;</span><span class="token operator">:</span> <span class="token string">&quot;npm install -g &amp;&amp; npm-check-updates&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;ncu&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ncu -u &amp;&amp; npm i&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><h4 id="package-包"><a href="#package-包" class="header-anchor">#</a> package 包</h4> <p>点击下方的链接直接跳转官网，方便查看</p> <ul><li><p><a href="https://reactjs.org/" target="_blank" rel="noopener noreferrer">&quot;react&quot;: &quot;^16.13.1&quot;<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p><a href="https://reactrouter.com/web/guides/quick-start" target="_blank" rel="noopener noreferrer">&quot;react-router-dom&quot;: &quot;^5.2.0&quot;<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> (react 路由 V5 大版本)</p></li> <li><p><a href="https://redux.js.org/" target="_blank" rel="noopener noreferrer">&quot;redux&quot;: &quot;^4.0.5&quot;<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p><a href="https://ant.design/index-cn" target="_blank" rel="noopener noreferrer">&quot;antd&quot;: &quot;^4.6.1&quot;<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p><a href="https://github.com/axios/axios" target="_blank" rel="noopener noreferrer">&quot;axios&quot;: &quot;^0.20.0&quot;<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p><a href="https://webpack.js.org/" target="_blank" rel="noopener noreferrer">&quot;webpack&quot;: &quot;4.44.1&quot;<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p>其他有待补充</p></li></ul> <div class="language- extra-class"><pre class="language-text"><code>
&quot;antd&quot;: &quot;^4.6.1&quot;,
&quot;axios&quot;: &quot;^0.20.0&quot;,
&quot;classnames&quot;: &quot;^2.2.6&quot;,
&quot;http-proxy-middleware&quot;: &quot;^1.0.5&quot;,
&quot;husky&quot;: &quot;^4.2.5&quot;,
&quot;immutable&quot;: &quot;^4.0.0-rc.12&quot;,
&quot;normalize.css&quot;: &quot;^8.0.1&quot;,
&quot;react-redux&quot;: &quot;^7.2.1&quot;,
&quot;react-router-config&quot;: &quot;^5.1.1&quot;,
&quot;redux&quot;: &quot;^4.0.5&quot;,
&quot;redux-immutable&quot;: &quot;^4.0.0&quot;,
&quot;styled-components&quot;: &quot;^5.1.1&quot;,
&quot;webpack&quot;: &quot;4.44.1&quot;,
</code></pre></div><p>简单的说一下</p> <ul><li><code>antd</code> 用的是 V4 大版本 截止目前最新，因为和 V3 版本写法上有不同的地方</li> <li><code>immutable</code> <code>redux-immutable</code> redux 数据流不可变的一种方案（并非最好）</li> <li><code>redux</code> <code>react-redux</code> 全部都是最新包</li> <li><strong><code>react</code></strong> 版本是官方最新</li></ul> <h4 id="node-等环境"><a href="#node-等环境" class="header-anchor">#</a> <code>Node</code> 等环境</h4> <ul><li>node v14.8.0</li></ul> <h3 id="运行项目"><a href="#运行项目" class="header-anchor">#</a> 运行项目</h3> <h4 id="clone-项目"><a href="#clone-项目" class="header-anchor">#</a> clone 项目</h4> <div class="language- extra-class"><pre class="language-text"><code>https://github.com/yayxs/NeteaseCloudMusic.git
</code></pre></div><h4 id="安装依赖"><a href="#安装依赖" class="header-anchor">#</a> 安装依赖</h4> <div class="language- extra-class"><pre class="language-text"><code>npm run check &amp;&amp; ncu // 检查依赖包版本  更新至最新并安装
</code></pre></div><h4 id="项目运行"><a href="#项目运行" class="header-anchor">#</a> 项目运行</h4> <div class="language- extra-class"><pre class="language-text"><code>npm run start
</code></pre></div><p>以上的<code>命令</code> 同时可以替换为 <code>yarn</code> 等，如果你喜欢的话</p> <h2 id="关于项目的样式"><a href="#关于项目的样式" class="header-anchor">#</a> 关于项目的样式</h2> <p>采用<code>antd</code> 组件库 + <code>styled-components</code> 结合 <code>sass</code> 以及 <code>normalize.css</code> 重置样式</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> styled <span class="token keyword">from</span> <span class="token string">&quot;styled-components&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> WrapperContainer <span class="token operator">=</span> styled<span class="token punctuation">.</span>div<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
  height: 285px;
  width: 100vw;
  background: url(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> props<span class="token punctuation">.</span>bgImage<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">) center center/6000px;

  .banner {
    height: 285px;
    display: flex;
    position: relative;
  }
</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
</code></pre></div><p>用上述的方式写样式，结合 <code>sass</code> 共同完成页面的样式部分</p> <h2 id="axios-网络请求封装"><a href="#axios-网络请求封装" class="header-anchor">#</a> axios 网络请求封装</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/*
 * @Author: yayxs
 * @Date: 2020-08-26 21:37:00
 * @LastEditTime: 2020-08-26 23:54:10
 * @LastEditors: yayxs
 * @Description:
 * @FilePath: \NeteaseCloudMusic\src\services\request.js
 * @
 */</span>
<span class="token comment">// 引入axios</span>
<span class="token keyword">import</span> axios <span class="token keyword">from</span> <span class="token string">&quot;axios&quot;</span><span class="token punctuation">;</span>
<span class="token comment">// import * as commonConfig from &quot;../common/config&quot;;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 1. 实例配置</span>
    <span class="token keyword">const</span> insOptions <span class="token operator">=</span> <span class="token punctuation">{</span>
      baseURL<span class="token operator">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">REACT_APP_BASE_URL</span><span class="token punctuation">,</span>
      timeout<span class="token operator">:</span> <span class="token function">Number</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">REACT_APP_TIME_OUT</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>insOptions<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 2. 创建axios 实例</span>
    <span class="token keyword">const</span> axiosInstance <span class="token operator">=</span> axios<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>insOptions<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 3. 请求拦截</span>
    axiosInstance<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>request<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>
      <span class="token punctuation">(</span><span class="token parameter">config</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// 3-1 页面添加loading组件</span>
        <span class="token comment">// 3-2 token 鉴权</span>
        <span class="token comment">// ……</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> config<span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> err<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 4. 响应拦截</span>
    axiosInstance<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>response<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>
      <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> res<span class="token punctuation">.</span>data<span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// 错误码处理</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>err <span class="token operator">&amp;&amp;</span> err<span class="token punctuation">.</span>response<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> err<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 5 网络请求</span>
    <span class="token function">axiosInstance</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">resolve</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">reject</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>使用的时候直接可以在<code>@/api</code> 文件夹下创建对应的 <code>js</code> 文件，然后配置对应的接口</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/*
 * @Author: yayxs
 * @Date: 2020-08-26 22:35:37
 * @LastEditTime: 2020-08-26 23:48:17
 * @LastEditors: yayxs
 * @Description: 推荐 API
 * @FilePath: \NeteaseCloudMusic\src\api\recommend.js
 * @
 */</span>
<span class="token keyword">import</span> request <span class="token keyword">from</span> <span class="token string">&quot;@/services/request&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">fetchBannerListApi</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
  <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    url<span class="token operator">:</span> <span class="token string">&quot;/banner&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token punctuation">{</span> fetchBannerListApi <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="关于接口"><a href="#关于接口" class="header-anchor">#</a> 关于接口</h3> <p>请参考 <strong><a href="https://binaryify.github.io/NeteaseCloudMusicApi/#/" target="_blank" rel="noopener noreferrer">网易云音乐 NodeJS 版 API<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></strong></p> <h2 id="组件书写方式"><a href="#组件书写方式" class="header-anchor">#</a> 组件书写方式</h2> <p>以头部的<code>header组件为例子</code></p> <p><code>@/components/header</code></p> <ul><li><p>index.jsx</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> memo <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> classnames <span class="token keyword">from</span> <span class="token string">&quot;classnames&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> WarpperContainer<span class="token punctuation">,</span> StyledLeft<span class="token punctuation">,</span> StyledRight <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./styled&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> NavLink <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-router-dom&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> headerNavConfig <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;../../common/config&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> HeaderComp <span class="token operator">=</span> <span class="token function">memo</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">WarpperContainer</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>wrap_1100_center container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">StyledLeft</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">hidefocus</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/#<span class="token punctuation">&quot;</span></span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>logo sprite_topbar<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            网易云音乐
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token punctuation">{</span>headerNavConfig<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">key</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>title<span class="token punctuation">}</span></span> <span class="token attr-name">className</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token function">classnames</span><span class="token punctuation">(</span><span class="token string">&quot;setected_nav&quot;</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">NavLink</span></span> <span class="token attr-name">to</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>path<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                  </span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>title<span class="token punctuation">}</span><span class="token plain-text">
                  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sprite_topbar icon<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">NavLink</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
              </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
            <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">StyledLeft</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">StyledRight</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">StyledRight</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">WarpperContainer</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> HeaderComp<span class="token punctuation">;</span>
</code></pre></div></li> <li><p>styled.js</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/*
 * @Author: yayxs
 * @Date: 2020-08-24 23:28:16
 * @LastEditTime: 2020-08-25 23:28:36
 * @LastEditors: yayxs
 * @Description:
 * @FilePath: \NeteaseCloudMusic\src\components\header\styled.js
 * @
 */</span>
<span class="token keyword">import</span> styled <span class="token keyword">from</span> <span class="token string">&quot;styled-components&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> WarpperContainer <span class="token operator">=</span> styled<span class="token punctuation">.</span>div<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
  width: 100vw;
  height: 70px;
  background-color: #242424;
  .container {
    display: flex;
  }
</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> StyledLeft <span class="token operator">=</span> styled<span class="token punctuation">.</span>div<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
  display: flex;
  .logo {
    display: block;
    width: 176px;
    height: 69px;
    background-position: 0 0;
    text-indent: -9999px;
  }
  ul {
    width: 508px;
    height: 70px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    li {
      font-size: 14px;
      color: #ccc;
    }
  }
</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> StyledRight <span class="token operator">=</span> styled<span class="token punctuation">.</span>div<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
</code></pre></div></li></ul> <h2 id="redux-流程"><a href="#redux-流程" class="header-anchor">#</a> redux 流程</h2> <p><strong>此项目的数据分为两种</strong> 一种是组件内部的状态。这时候，我们采用 <code>react hooks</code> 中的 <code>useState hook</code> 来解决</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">const</span> <span class="token punctuation">[</span>currIndex<span class="token punctuation">,</span> setCurrIndex<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><code>axios</code> 网络请求的数据我们一律存取在 <code>redux</code></p> <h3 id="整体的流程"><a href="#整体的流程" class="header-anchor">#</a> 整体的流程</h3> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Provider <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-redux&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> store <span class="token keyword">from</span> <span class="token string">&quot;./store&quot;</span><span class="token punctuation">;</span>

ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Provider</span></span> <span class="token attr-name">store</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>store<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">App</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Provider</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span>
  document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;root&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>store/index.js</li></ul> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token comment">/*
 * @Author: yayxs
 * @Date: 2020-08-22 11:48:40
 * @LastEditTime: 2020-08-26 23:01:17
 * @LastEditors: yayxs
 * @Description:
 * @FilePath: \NeteaseCloudMusic\src\store\index.js
 * @
 */</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> createStore<span class="token punctuation">,</span> applyMiddleware<span class="token punctuation">,</span> compose <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;redux&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> thunk <span class="token keyword">from</span> <span class="token string">&quot;redux-thunk&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> reducer <span class="token keyword">from</span> <span class="token string">&quot;./reducer&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> middlewares <span class="token operator">=</span> <span class="token punctuation">[</span>thunk<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">===</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">development</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> logger <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">redux-logger</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  middlewares<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>logger<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> composeEnhancers <span class="token operator">=</span> window<span class="token punctuation">.</span>__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ <span class="token operator">||</span> compose<span class="token punctuation">;</span>
<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">createStore</span><span class="token punctuation">(</span>
  reducer<span class="token punctuation">,</span>
  <span class="token comment">/* preloadedState, */</span> <span class="token function">composeEnhancers</span><span class="token punctuation">(</span><span class="token function">applyMiddleware</span><span class="token punctuation">(</span><span class="token operator">...</span>middlewares<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> store<span class="token punctuation">;</span>
</code></pre></div><h3 id="局部组件状态"><a href="#局部组件状态" class="header-anchor">#</a> 局部组件状态</h3> <p>关于局部的组件流程，我们分为几部分处理</p> <h4 id="actiontypes-js"><a href="#actiontypes-js" class="header-anchor">#</a> actionTypes.js</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/*
 * @Author: yayxs
 * @Date: 2020-08-26 22:27:29
 * @LastEditTime: 2020-08-26 22:32:33
 * @LastEditors: yayxs
 * @Description:
 * @FilePath: \NeteaseCloudMusic\src\pages\foundMusic\childrenPages\recommend\store\actionTypes.js
 * @
 */</span>
<span class="token comment">// 获取轮播图数据</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token constant">FETCH_BANNER_LIST_SUCCESS</span> <span class="token operator">=</span> <span class="token string">&quot;FETCH_BANNER_LIST_SUCCESS&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token constant">FETCH_BANNERLIST_BEGIN</span> <span class="token operator">=</span> <span class="token string">&quot;FETCH_BANNERLIST_BEGIN&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token constant">FETCH_BANNERLIST_ERROR</span> <span class="token operator">=</span> <span class="token string">&quot;FETCH_BANNERLIST_ERROR&quot;</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="actioncreators"><a href="#actioncreators" class="header-anchor">#</a> actionCreators</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/*
 * @Author: yayxs
 * @Date: 2020-08-26 22:27:33
 * @LastEditTime: 2020-08-27 21:07:49
 * @LastEditors: yayxs
 * @Description:
 * @FilePath: \NeteaseCloudMusic\src\pages\foundMusic\childrenPages\recommend\store\actionCreators.js
 * @
 */</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> fetchBannerListApi <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@/api/recommend.js&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token constant">FETCH_BANNER_LIST_SUCCESS</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./actionTypes&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">changeBannerLsitAction</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
  type<span class="token operator">:</span> <span class="token constant">FETCH_BANNER_LIST_SUCCESS</span><span class="token punctuation">,</span>
  payload<span class="token operator">:</span> <span class="token punctuation">{</span> data <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">getBannerListAsyncAction</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token parameter">dispatch</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">fetchBannerListApi</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>code <span class="token operator">===</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token function">changeBannerLsitAction</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>banners<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="reducer"><a href="#reducer" class="header-anchor">#</a> reducer</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/*
 * @Author: yayxs
 * @Date: 2020-08-26 22:27:34
 * @LastEditTime: 2020-08-27 21:09:44
 * @LastEditors: yayxs
 * @Description:
 * @FilePath: \NeteaseCloudMusic\src\pages\foundMusic\childrenPages\recommend\store\reducer.js
 * @
 */</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Map <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;immutable&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> actionTypes <span class="token keyword">from</span> <span class="token string">&quot;./actionTypes&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> initState <span class="token operator">=</span> <span class="token function">Map</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  bannersList<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token parameter">state <span class="token operator">=</span> initState<span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">switch</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> actionTypes<span class="token punctuation">.</span><span class="token constant">FETCH_BANNER_LIST_SUCCESS</span><span class="token operator">:</span>
      <span class="token keyword">return</span> state<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;bannersList&quot;</span><span class="token punctuation">,</span> action<span class="token punctuation">.</span>payload<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">default</span><span class="token operator">:</span>
      <span class="token keyword">return</span> state<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>关于以上的<code>redux</code> 的流程，一方面 你可以关注本项目查看完整的代码 , 其次**<a href="https://github.com/yayxs/state-management-compare/tree/master/docs" target="_blank" rel="noopener noreferrer">我有整理一篇 redux 流程的纵向分析实践（2020 年 8 月更新）<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>**</p> <p>当然你也可以直接在 <code>juejin 查看</code> (如果遇到网络问题) <a href="https://juejin.im/post/6844904128682917901" target="_blank" rel="noopener noreferrer">https://juejin.im/post/6844904128682917901<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="路由懒加载"><a href="#路由懒加载" class="header-anchor">#</a> 路由懒加载</h2> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">const</span> YYHeaderComp <span class="token operator">=</span> <span class="token function">lazy</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&quot;./components/header/index&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> YYFooterComp <span class="token operator">=</span> <span class="token function">lazy</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&quot;./components/footer/index&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="webpack-别名配置"><a href="#webpack-别名配置" class="header-anchor">#</a> webpack 别名配置</h2> <p>此项目通过简单的修改<code>webpack</code>的配置来添加别名（alias）</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">resolveDir</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">dir</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> res <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> dir<span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> res<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>   alias<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// webpack 配置别名</span>
        <span class="token string">'@'</span><span class="token operator">:</span> <span class="token function">resolveDir</span><span class="token punctuation">(</span><span class="token string">'../src'</span><span class="token punctuation">)</span> <span class="token punctuation">,</span><span class="token comment">// 这样配置后 @ 可以指向 src 目录</span>
        <span class="token string">'components'</span><span class="token operator">:</span> <span class="token function">resolveDir</span><span class="token punctuation">(</span><span class="token string">&quot;../src/components&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token comment">// Support React Native Web</span>
        <span class="token comment">// https://www.smashingmagazine.com/2016/08/a-glimpse-into-the-future-with-react-native-for-web/</span>
        <span class="token string">'react-native'</span><span class="token operator">:</span> <span class="token string">'react-native-web'</span><span class="token punctuation">,</span>
        <span class="token comment">// Allows for better profiling with ReactDevTools</span>
        <span class="token operator">...</span><span class="token punctuation">(</span>isEnvProductionProfile <span class="token operator">&amp;&amp;</span> <span class="token punctuation">{</span>
          <span class="token string">'react-dom$'</span><span class="token operator">:</span> <span class="token string">'react-dom/profiling'</span><span class="token punctuation">,</span>
          <span class="token string">'scheduler/tracing'</span><span class="token operator">:</span> <span class="token string">'scheduler/tracing-profiling'</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token operator">...</span><span class="token punctuation">(</span>modules<span class="token punctuation">.</span>webpackAliases <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><h2 id="cra-的配置"><a href="#cra-的配置" class="header-anchor">#</a> CRA 的配置</h2> <h3 id="proxy-代理的配置"><a href="#proxy-代理的配置" class="header-anchor">#</a> proxy 代理的配置</h3> <p>在开发中代理 <code>API</code> 请求 ，通过<code>http-proxy-middleware</code> 然后在 <strong>src</strong> 目录下新建 <code>setupProxy.js</code> 文件。注意是<code>src</code>目录 并不是 项目的根目录</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> createProxyMiddleware <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;http-proxy-middleware&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">app</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>
    <span class="token string">&quot;/api&quot;</span><span class="token punctuation">,</span>
    <span class="token function">createProxyMiddleware</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      target<span class="token operator">:</span> <span class="token string">&quot;http://localhost:5000&quot;</span><span class="token punctuation">,</span>
      changeOrigin<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="测试代理"><a href="#测试代理" class="header-anchor">#</a> 测试代理</h3> <p>如果你想测试代理，可以启动 <code>examples/proxy-middleware</code> (https://github.com/yayxs/NeteaseCloudMusic/tree/master/examples/proxy-middleware) 这是一个 nest 项目，安装依赖，然后 <code>npm run start</code></p> <h2 id="其他"><a href="#其他" class="header-anchor">#</a> 其他</h2> <h3 id="编辑器的基本配置"><a href="#编辑器的基本配置" class="header-anchor">#</a> 编辑器的基本配置</h3> <p>写<code>React</code> 的项目可以使用<code>vscode</code> 插件 ，快捷的生成代码片段</p> <p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e1c074aa4a0448aea6757fc614d35ccf~tplv-k3u1fbpfcp-zoom-1.image" alt=""></p> <p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c30b8cf1c1794ad7b41cfaf03dd7d722~tplv-k3u1fbpfcp-zoom-1.image" alt=""></p> <p>在项目目录的最顶端有个<code>.vscode</code> 并没有添加 到 忽略文件，如果你使用<code>vscode</code> 编辑器的话，会看到</p> <ul><li><p>launch.json</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0.2.0&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;configurations&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Chrome&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;chrome&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;request&quot;</span><span class="token operator">:</span> <span class="token string">&quot;launch&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;http://localhost:3001&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;webRoot&quot;</span><span class="token operator">:</span> <span class="token string">&quot;${workspaceFolder}/src&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;sourceMapPathOverrides&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;webpack:///src/*&quot;</span><span class="token operator">:</span> <span class="token string">&quot;${webRoot}/*&quot;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>settings.json</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;emmet.includeLanguages&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;javascript&quot;</span><span class="token operator">:</span> <span class="token string">&quot;javascriptreact&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ul> <p>具体的含义及作用请自行 <code>搜索</code></p> <h3 id="资源"><a href="#资源" class="header-anchor">#</a> 资源</h3> <h4 id="网易云官方精灵图"><a href="#网易云官方精灵图" class="header-anchor">#</a> 网易云官方精灵图</h4> <ul><li>https://s2.music.126.net/style/web2/img/frame/topbar.png 头部 logo 等</li> <li>https://s2.music.126.net/style/web2/img/index/download.png?3ef09214698d22ffbf4ba0a142a0b6d1 下载客户端</li></ul> <h2 id="关联阅读"><a href="#关联阅读" class="header-anchor">#</a> 关联阅读</h2> <ul><li><a href="https://github.com/yayxs/state-management-compare/tree/master/docs" target="_blank" rel="noopener noreferrer">react | react-redux | react-thunk | state | 状态管理 | state-management-compare<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h2 id="q-a"><a href="#q-a" class="header-anchor">#</a> Q&amp;A</h2> <p>有什么问题还请 多多交流 <a href="https://github.com/yayxs/NeteaseCloudMusic/issues" target="_blank" rel="noopener noreferrer">https://github.com/yayxs/NeteaseCloudMusic/issues<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>也可以添加交流群</p> <ul><li>前端互鱼 1 群 713593204</li></ul> <hr> <p>这是 <code>网易云web版本项目的第一篇分享</code> 你们的小赞是我更新的动力，能看到这里的人啊，都是“闲人” ,老粉晓得咱们的玩法，评论区 赞数最多的朋友，下一篇直接置顶 【读读评论】。给个 <code>star</code> 吧 亲</p> <hr> <hr> <h1 id="react16-13-1-网抑云实战-第二周-播放条组件、路由配置、api-项目双部署"><a href="#react16-13-1-网抑云实战-第二周-播放条组件、路由配置、api-项目双部署" class="header-anchor">#</a> React16.13.1 网抑云实战 （第二周）| 播放条组件、路由配置、Api 项目双部署</h1> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>播放条组件、路由配置、Api 项目双部署</p></div> <blockquote><p>项目源码地址,第一时间更新 <a href="https://github.com/yayxs/NeteaseCloudMusic" target="_blank" rel="noopener noreferrer">https://github.com/yayxs/NeteaseCloudMusic<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>wiki 地址以及 Api 接口说明 <a href="https://github.com/yayxs/NeteaseCloudMusic/blob/master/docs/README.md" target="_blank" rel="noopener noreferrer">https://github.com/yayxs/NeteaseCloudMusic/blob/master/docs/README.md<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <h2 id="前情提要"><a href="#前情提要" class="header-anchor">#</a> 前情提要</h2> <h3 id="读读评论"><a href="#读读评论" class="header-anchor">#</a> 读读评论</h3> <ul><li><p>[x] <img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ac85299fca4148ac83afa7515a65139c~tplv-k3u1fbpfcp-zoom-1.image" alt=""></p> <blockquote><p>项目和其用到的 API 已经 部署上线，详细请看 wiki 文档，感谢评论</p></blockquote></li> <li><p>[x] <img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d3797bf768034c46815aa268a2fc9277~tplv-k3u1fbpfcp-zoom-1.image" alt=""></p></li> <li><p>[x] <img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f4096987921749398d2ae47b94e7794e~tplv-k3u1fbpfcp-zoom-1.image" alt=""></p></li></ul> <blockquote><p>感谢用户 <a href="https://juejin.im/user/2119514148314382" target="_blank" rel="noopener noreferrer"> @OldMan23837 <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <h3 id="系列文章"><a href="#系列文章" class="header-anchor">#</a> 系列文章</h3> <ul><li><a href="https://juejin.im/post/6866940379866857480#heading-36" target="_blank" rel="noopener noreferrer">React16.13.1 网抑云实战 （第一周）| axios 封装、轮播图实现、alias 别名<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h2 id="第二周成果展示"><a href="#第二周成果展示" class="header-anchor">#</a> 第二周成果展示</h2> <p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3a0f9284a5024944a025bf37ef71c713~tplv-k3u1fbpfcp-zoom-1.image" alt=""></p> <h3 id="完成部分"><a href="#完成部分" class="header-anchor">#</a> 完成部分</h3> <ul><li>首先封装几个公用的组件，主要工作量在底部的<strong>播放控制条</strong></li> <li>跑通<code>react-router-dom</code> <code>react-router-config</code> 的配置</li> <li><strong>Api</strong> 接口部署上线 ，项目部署上线</li></ul> <h3 id="底部核心播放-bar"><a href="#底部核心播放-bar" class="header-anchor">#</a> 底部核心播放 bar</h3> <p>底部最核心的功能就是对音乐的播放，还有就是进度条，对音乐的播放，利用 <code>HTML5</code> 新增的标签 ,动态的改变 <code>SRC</code> 属性</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code>audioRef<span class="token punctuation">.</span>current<span class="token punctuation">.</span>src <span class="token operator">=</span> <span class="token function">getAudioSrc</span><span class="token punctuation">(</span><span class="token string">&quot;442869203&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 开始播放</span>
<span class="token function">setNowIsPaly</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
audioRef<span class="token punctuation">.</span>current
  <span class="token punctuation">.</span><span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">setNowIsPaly</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">setNowIsPaly</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="红色滑动条"><a href="#红色滑动条" class="header-anchor">#</a> 红色滑动条</h3> <p>利用<code>antd</code> 的 <a href="https://ant.design/components/slider-cn/" target="_blank" rel="noopener noreferrer">Slider 滑动输入条<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> ，修改其样式</p> <p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f882d6d2c9df40aaa57195dddf5facbf~tplv-k3u1fbpfcp-zoom-1.image" alt=""></p> <div class="language-scss extra-class"><pre class="language-scss"><code><span class="token selector">.pbar </span><span class="token punctuation">{</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 493px<span class="token punctuation">;</span>
  <span class="token selector">.ant-slider </span><span class="token punctuation">{</span>
    <span class="token property">padding</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 493px<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 9px<span class="token punctuation">;</span>
    <span class="token selector">.ant-slider-rail </span><span class="token punctuation">{</span>
      <span class="token property">width</span><span class="token punctuation">:</span> 493px<span class="token punctuation">;</span>
      <span class="token property">border-radius</span><span class="token punctuation">:</span> 2px<span class="token punctuation">;</span>
      <span class="token property">height</span><span class="token punctuation">:</span> 9px<span class="token punctuation">;</span>
      <span class="token property">background-color</span><span class="token punctuation">:</span> #535353<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token selector">.ant-slider-track </span><span class="token punctuation">{</span>
      <span class="token property">height</span><span class="token punctuation">:</span> 9px<span class="token punctuation">;</span>
      <span class="token property">background-color</span><span class="token punctuation">:</span> #c70c0c<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token selector">.ant-slider-step </span><span class="token punctuation">{</span>
      <span class="token property">border-radius</span><span class="token punctuation">:</span> 2px<span class="token punctuation">;</span>
      <span class="token property">height</span><span class="token punctuation">:</span> 9px<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token selector">.ant-slider-handle </span><span class="token punctuation">{</span>
      <span class="token property">width</span><span class="token punctuation">:</span> 22px<span class="token punctuation">;</span>
      <span class="token property">height</span><span class="token punctuation">:</span> 24px<span class="token punctuation">;</span>
      <span class="token property">margin-top</span><span class="token punctuation">:</span> -7px<span class="token punctuation">;</span>
      <span class="token property">background</span><span class="token punctuation">:</span> <span class="token url">url</span><span class="token punctuation">(</span><span class="token string">&quot;../../../assets//images/sprite_icon.png&quot;</span><span class="token punctuation">)</span> 0 -250px<span class="token punctuation">;</span>
      <span class="token property">border</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.time </span><span class="token punctuation">{</span>
    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
    <span class="token property">top</span><span class="token punctuation">:</span> 21px<span class="token punctuation">;</span>
    <span class="token property">right</span><span class="token punctuation">:</span> 215px<span class="token punctuation">;</span>
    <span class="token property">color</span><span class="token punctuation">:</span> #797979<span class="token punctuation">;</span>
    <span class="token selector">span </span><span class="token punctuation">{</span>
      <span class="token property">color</span><span class="token punctuation">:</span> #a1a1a1<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token property">text-shadow</span><span class="token punctuation">:</span> 0 1px 0 #121212<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>注意上文我们引入背景图片的方式</strong> 通过 <code>background: url(&quot;../../../assets/images/sprite_icon.png&quot;) 0 -250px;</code></p> <p>这是我们使用 <code>sass</code> 但是使用 <code>styled-components</code> 就不能这样直接引入了，否则会找不到 ，可通过</p> <div class="language- extra-class"><pre class="language-text"><code>import arrowImg from &quot;../../../../../../assets/images/arrow_banner_sprite.png&quot;;
</code></pre></div><p>然后使用的时候</p> <div class="language- extra-class"><pre class="language-text"><code>background: url(${arrowImg});
</code></pre></div><p>还有一点，关于 鼠标滑过的高亮效果其实是精灵图的 位置发生了变化</p> <div class="language-scss extra-class"><pre class="language-scss"><code><span class="token selector"><span class="token parent important">&amp;</span>:hover </span><span class="token punctuation">{</span>
  <span class="token property">background-position</span><span class="token punctuation">:</span> 0 -360px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="路由配置"><a href="#路由配置" class="header-anchor">#</a> 路由配置</h2> <p>路由配置方案，采用 <code>react-router-config</code> 这也是 官方推荐的静态路由配置方案 ，具体的路由表 见项目 <code>@/router/routesConfig.js</code></p> <p>从页面来分析的话</p> <div class="language- extra-class"><pre class="language-text"><code>// 发现音乐 : 推荐 排行榜 歌单 主播电台 歌手 新碟上架
// 我的音乐 :
// 朋友 :
// 商城 :
// 音乐人
// 下载客户端
</code></pre></div><p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/195b0b535e564f86beb0d31f85929b2e~tplv-k3u1fbpfcp-zoom-1.image" alt=""></p> <div class="language-js extra-class"><pre class="language-js"><code>     <span class="token punctuation">{</span>
        component<span class="token operator">:</span> YYAlbumPage<span class="token punctuation">,</span>
        path<span class="token operator">:</span> <span class="token string">&quot;/discover/album&quot;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 我的音乐</span>
  <span class="token punctuation">{</span>
    component<span class="token operator">:</span> YYMyPage<span class="token punctuation">,</span>
    path<span class="token operator">:</span> <span class="token string">&quot;/my&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 朋友</span>
  <span class="token punctuation">{</span>
    component<span class="token operator">:</span> YYFriendPage<span class="token punctuation">,</span>
    path<span class="token operator">:</span> <span class="token string">&quot;/friend&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 下载客户端</span>
  <span class="token punctuation">{</span>
    component<span class="token operator">:</span> YYDownloadPage<span class="token punctuation">,</span>
    path<span class="token operator">:</span> <span class="token string">&quot;/download&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><h2 id="项目部署上线"><a href="#项目部署上线" class="header-anchor">#</a> 项目部署上线</h2> <h3 id="api-接口"><a href="#api-接口" class="header-anchor">#</a> Api 接口</h3> <p>关于项目中所用到的网易云的接口 <strong>已经完成部署</strong> 短时间不会下线 ，你也可以直接 使用 基本的地址是 <code>http://101.201.148.180:3000</code> (项目部署在 3000 端口)</p> <p>请求示例参考</p> <p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/09de5eb66ee94b9dbf28c652ce2ce60b~tplv-k3u1fbpfcp-zoom-1.image" alt=""></p> <h3 id="项目的部署"><a href="#项目的部署" class="header-anchor">#</a> 项目的部署</h3> <p>项目目前通过手动部署的方式，已经部署在阿里云服务，有关 <code>nginx</code> 相关的配置以及一些常用的配置 可以看 <a href="https://juejin.im/post/6844904192146931719" target="_blank" rel="noopener noreferrer">Nginx | 前端也应晓得常用 Nginx 命令及配置<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>不过打包的时候如果遇到一些问题，比如 webpack 的一些配置问题。可能需要注释掉</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// config/webpack.config.js</span>

<span class="token comment">// importWorkboxFrom: &quot;cdn&quot;,</span>
</code></pre></div><p>具体见文末推荐阅读</p> <h2 id="关联阅读-2"><a href="#关联阅读-2" class="header-anchor">#</a> 关联阅读</h2> <ul><li><a href="https://developers.google.com/web/tools/workbox/guides/migrations/migrate-from-v4" target="_blank" rel="noopener noreferrer">https://developers.google.com/web/tools/workbox/guides/migrations/migrate-from-v4<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h2 id="最后"><a href="#最后" class="header-anchor">#</a> 最后</h2> <p>个人项目，下班时间写，更新慢见谅。正如上文所说，已经部署上线，请关注 <a href="http://101.201.148.180/#/discover/recommend" target="_blank" rel="noopener noreferrer">http://101.201.148.180/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <ul><li>感谢评论关注 <code>star</code> 的铁汁儿，期待在下一次的读读评论见到你</li> <li>文档中的外链比较多，见谅，因为是之前简单写过，就不再写一遍呢，在写就是深入了 over</li></ul> <h2 id="彩蛋"><a href="#彩蛋" class="header-anchor">#</a> 彩蛋</h2> <h3 id="精灵图篇"><a href="#精灵图篇" class="header-anchor">#</a> 精灵图篇</h3> <ul><li><a href="https://s2.music.126.net/style/web2/img/frame/playbar.png?4b285455950eeb8c77bec37cb2a2829c" target="_blank" rel="noopener noreferrer">https://s2.music.126.net/style/web2/img/frame/playbar.png?4b285455950eeb8c77bec37cb2a2829c<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://s2.music.126.net/style/web2/img/frame/statbar.png?fe9bf6f2a8cee166bf1b2ea588744650" target="_blank" rel="noopener noreferrer">底部播放 bar<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://s2.music.126.net/style/web2/img/index/index.png?4e57335302280b79024e0c6444d40fc2" target="_blank" rel="noopener noreferrer">公共的 title<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://s2.music.126.net/style/web2/img/coverall.png?8e9cf6b243b0ed197db8847d8905d064" target="_blank" rel="noopener noreferrer">cover<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h3 id="插件篇"><a href="#插件篇" class="header-anchor">#</a> 插件篇</h3> <p>上次忘了说了，如果使用 <code>styled-components</code> 这个方案处理样式的话，需要装个插件最好了</p> <p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c8740c69f6c549bc839d4ae9b3c5fe7d~tplv-k3u1fbpfcp-zoom-1.image" alt=""></p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">最近更新于:</span> <span class="time">11/7/2020, 2:10:33 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/guides/flutter/" class="prev">
        Flutter 指南手册
      </a></span> <span class="next"><a href="/guides/pro/flutter.html">
        Flutter实际项目开发中踩坑合集
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----><div></div></div></div>
    <script src="/assets/js/app.c6dc177b.js" defer></script><script src="/assets/js/2.37f6b020.js" defer></script><script src="/assets/js/71.ecbcae9e.js" defer></script>
  </body>
</html>
